!(function(n, t) {
  "object" == typeof exports && "object" == typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define([], t)
    : "object" == typeof exports
    ? (exports.sift = t())
    : (n.sift = t());
})(window, function() {
  return (function(n) {
    var t = {};
    function r(e) {
      if (t[e]) return t[e].exports;
      var u = (t[e] = { i: e, l: !1, exports: {} });
      return n[e].call(u.exports, u, u.exports, r), (u.l = !0), u.exports;
    }
    return (
      (r.m = n),
      (r.c = t),
      (r.d = function(n, t, e) {
        r.o(n, t) || Object.defineProperty(n, t, { enumerable: !0, get: e });
      }),
      (r.r = function(n) {
        "undefined" != typeof Symbol &&
          Symbol.toStringTag &&
          Object.defineProperty(n, Symbol.toStringTag, { value: "Module" }),
          Object.defineProperty(n, "__esModule", { value: !0 });
      }),
      (r.t = function(n, t) {
        if ((1 & t && (n = r(n)), 8 & t)) return n;
        if (4 & t && "object" == typeof n && n && n.__esModule) return n;
        var e = Object.create(null);
        if (
          (r.r(e),
          Object.defineProperty(e, "default", { enumerable: !0, value: n }),
          2 & t && "string" != typeof n)
        )
          for (var u in n)
            r.d(
              e,
              u,
              function(t) {
                return n[t];
              }.bind(null, u)
            );
        return e;
      }),
      (r.n = function(n) {
        var t =
          n && n.__esModule
            ? function() {
                return n.default;
              }
            : function() {
                return n;
              };
        return r.d(t, "a", t), t;
      }),
      (r.o = function(n, t) {
        return Object.prototype.hasOwnProperty.call(n, t);
      }),
      (r.p = ""),
      r((r.s = 0))
    );
  })([
    function(n, t, r) {
      n.exports = r(1);
    },
    function(n, t, r) {
      "use strict";
      function e(n) {
        var t = "[object " + n + "]";
        return function(n) {
          return Object.prototype.toString.call(n) === t;
        };
      }
      r.r(t),
        r.d(t, "default", function() {
          return y;
        }),
        r.d(t, "compare", function() {
          return j;
        });
      var u = e("Array"),
        o = e("Object"),
        i = e("Function");
      function f(n) {
        return n instanceof Date
          ? n.getTime()
          : u(n)
          ? n.map(f)
          : n && "function" == typeof n.toJSON
          ? n.toJSON()
          : n;
      }
      function c(n, t) {
        return i(n.get) ? n.get(t) : n[t];
      }
      function a(n) {
        return function(t, r) {
          if (!u(r) || !r.length) return n(t, r);
          for (var e = 0, o = r.length; e < o; e++)
            if (n(t, c(r, e))) return !0;
          return !1;
        };
      }
      function l(n, t, r, e) {
        return n.v(n.a, t, r, e);
      }
      var s = {
          $eq: a(function(n, t) {
            return n(t);
          }),
          $ne: (function(n) {
            return function(t, r) {
              if (!u(r) || !r.length) return n(t, r);
              for (var e = 0, o = r.length; e < o; e++)
                if (!n(t, c(r, e))) return !1;
              return !0;
            };
          })(function(n, t) {
            return !n(t);
          }),
          $gt: a(function(n, t) {
            return j(f(t), n) > 0;
          }),
          $gte: a(function(n, t) {
            return j(f(t), n) >= 0;
          }),
          $lt: a(function(n, t) {
            return j(f(t), n) < 0;
          }),
          $lte: a(function(n, t) {
            return j(f(t), n) <= 0;
          }),
          $mod: a(function(n, t) {
            return t % n[0] == n[1];
          }),
          $in: function(n, t) {
            if (!(t instanceof Array)) {
              var r = f(t);
              if (r === t && "object" == typeof t)
                for (u = n.length; u--; )
                  if (
                    String(n[u]) === String(t) &&
                    "[object Object]" !== String(t)
                  )
                    return !0;
              if (void 0 === r)
                for (u = n.length; u--; ) if (null == n[u]) return !0;
              for (u = n.length; u--; ) {
                var e = l(b(c(n, u), void 0), t, u, n);
                if (
                  e &&
                  "[object Object]" !== String(e) &&
                  "[object Object]" !== String(t)
                )
                  return !0;
              }
              return !!~n.indexOf(r);
            }
            for (var u = t.length; u--; ) if (~n.indexOf(f(c(t, u)))) return !0;
            return !1;
          },
          $nin: function(n, t, r, e) {
            return !s.$in(n, t, r, e);
          },
          $not: function(n, t, r, e) {
            return !l(n, t, r, e);
          },
          $type: function(n, t) {
            return void 0 != t && (t instanceof n || t.constructor == n);
          },
          $all: function(n, t, r, e) {
            return s.$and(n, t, r, e);
          },
          $size: function(n, t) {
            return !!t && n === t.length;
          },
          $or: function(n, t, r, e) {
            for (var u = 0, o = n.length; u < o; u++)
              if (l(c(n, u), t, r, e)) return !0;
            return !1;
          },
          $nor: function(n, t, r, e) {
            return !s.$or(n, t, r, e);
          },
          $and: function(n, t, r, e) {
            for (var u = 0, o = n.length; u < o; u++)
              if (!l(c(n, u), t, r, e)) return !1;
            return !0;
          },
          $regex: a(function(n, t) {
            return "string" == typeof t && n.test(t);
          }),
          $where: function(n, t, r, e) {
            return n.call(t, t, r, e);
          },
          $elemMatch: function(n, t, r, e) {
            return u(t)
              ? !!~(function(n, t) {
                  for (var r = 0; r < n.length; r++) {
                    c(n, r);
                    if (l(t, c(n, r))) return r;
                  }
                  return -1;
                })(t, n)
              : l(n, t, r, e);
          },
          $exists: function(n, t, r, e) {
            return e.hasOwnProperty(r) === n;
          }
        },
        p = {
          $eq: function(n) {
            return n instanceof RegExp
              ? function(t) {
                  return "string" == typeof t && n.test(t);
                }
              : n instanceof Function
              ? n
              : u(n) && !n.length
              ? function(n) {
                  return u(n) && !n.length;
                }
              : null === n
              ? function(n) {
                  return null == n;
                }
              : function(t) {
                  return 0 === j(f(t), f(n));
                };
          },
          $ne: function(n) {
            return p.$eq(n);
          },
          $and: function(n, t, r) {
            return n.map(d(r));
          },
          $all: function(n) {
            return p.$and(n);
          },
          $or: function(n, t, r) {
            return n.map(d(r));
          },
          $nor: function(n, t, r) {
            return n.map(d(r));
          },
          $not: function(n, t, r) {
            return d(r)(n);
          },
          $regex: function(n, t) {
            return new RegExp(n, t.$options);
          },
          $where: function(n) {
            return "string" == typeof n
              ? new Function("obj", "return " + n)
              : n;
          },
          $elemMatch: function(n, t, r) {
            return d(r)(n);
          },
          $exists: function(n) {
            return !!n;
          }
        };
      function g(n, t) {
        return { a: n, v: t };
      }
      function v(n, t) {
        var r = [];
        if (
          ((function n(t, r, e, o, i) {
            if (e === r.length || void 0 == t)
              return void i.push([t, r[e - 1], o]);
            var f = c(r, e);
            if (u(t) && isNaN(Number(f)))
              for (var a = 0, l = t.length; a < l; a++) n(c(t, a), r, e, t, i);
            else n(c(t, f), r, e + 1, t, i);
          })(t, n.k, 0, t, r),
          1 === r.length)
        ) {
          var e = r[0];
          return l(n.nv, e[0], e[1], e[2]);
        }
        for (
          var o = n && n.q && void 0 !== n.q.$ne, i = o, f = 0;
          f < r.length;
          f++
        ) {
          var a = r[f],
            s = l(n.nv, a[0], a[1], a[2]);
          o ? (i &= s) : (i |= s);
        }
        return i;
      }
      function $(n, t, r) {
        return { a: { k: n, nv: t, q: r }, v: v };
      }
      function d(n) {
        var t = function(n) {
            return (
              (n &&
                (function(n) {
                  return (
                    n && (n.constructor === Object || n.constructor === Array)
                  );
                })(n)) ||
                (n = { $eq: n }),
              n
            );
          },
          r = function(t) {
            t = f(t);
            var r = [];
            for (var u in t) {
              var o = t[u];
              if ("$options" !== u) {
                var i = s[u] || (n && n.expressions && n.expressions[u]);
                if (i) p[u] && (o = p[u](o, t, n)), r.push(g(f(o), i));
                else {
                  if (36 === u.charCodeAt(0))
                    throw new Error("Unknown operation " + u);
                  var c = u.split(".");
                  r.push($(c, e(o), o));
                }
              }
            }
            return 1 === r.length ? r[0] : g(r, s.$and);
          },
          e = function(n) {
            return (function(n) {
              return (
                -1 ===
                (function n(t, r) {
                  if (!o(t)) return r;
                  for (var e in t) r.push(e), n(t[e], r);
                  return r;
                })(n, [])
                  .join(",")
                  .search(/[$.]/)
              );
            })((n = t(n)))
              ? g(n, h)
              : r(n);
          };
        return function(n) {
          return r(t(n));
        };
      }
      function h(n, t) {
        if (
          Object.prototype.toString.call(n) !==
          Object.prototype.toString.call(t)
        )
          return !1;
        if (o(n)) {
          if (Object.keys(n).length !== Object.keys(t).length) return !1;
          for (var r in n) if (!h(n[r], t[r])) return !1;
          return !0;
        }
        if (u(n)) {
          if (n.length !== t.length) return !1;
          for (var e = 0, i = n.length; e < i; e++)
            if (!h(n[e], t[e])) return !1;
          return !0;
        }
        return n === t;
      }
      function b(n, t) {
        var r = d(t)(n);
        return (
          t &&
            t.select &&
            (r = {
              a: r,
              v: function(n, r, e, u) {
                return l(n, t.select(r), e, u);
              }
            }),
          r
        );
      }
      function y(n, t) {
        var r = b(n, t);
        return function(n, t, e) {
          return l(r, n, t, e);
        };
      }
      function j(n, t) {
        if (h(n, t)) return 0;
        if (typeof n == typeof t) {
          if (n > t) return 1;
          if (n < t) return -1;
        }
      }
    }
  ]);
});
